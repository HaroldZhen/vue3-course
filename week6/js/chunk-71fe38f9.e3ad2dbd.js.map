{"version":3,"sources":["webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b","webpack:///./src/views/Login.vue?fc44"],"names":["class","for","login","type","user","username","placeholder","id","required","autofocus","password","to","isLogin","data","methods","setUser","userData","this","hexAxios","post","signin","then","res","success","saveCookie","$router","push","$swal","title","message","icon","toast","position","showCloseButton","showConfirmButton","catch","error","toString","token","expired","document","cookie","Date","checkUser","check","created","authTOKEN","replace","defaults","headers","common","Authorization","render"],"mappings":"0IACOA,MAAM,S,GACJA,MAAM,kB,GACJA,MAAM,8B,EACT,eAAgD,MAA5CA,MAAM,8BAA6B,QAAI,G,GACtCA,MAAM,S,GAEFA,MAAM,sB,EAET,eAAwC,SAAjCC,IAAI,SAAQ,iBAAa,G,GAE7BD,MAAM,iB,EAET,eAAsC,SAA/BC,IAAI,YAAW,YAAQ,G,EAEhC,eAA6D,UAArDD,MAAM,qCAAoC,MAAE,G,iBAGhC,Q,iBACmC,Q,EAI7D,eAAwD,KAArDA,MAAM,wBAAuB,mBAAoB,G,oFAtBxD,eAwBM,MAxBN,EAwBM,CAvBJ,eAsBM,MAtBN,EAsBM,CArBJ,eAmBM,MAnBN,EAmBM,CAlBJ,EACA,eAgBM,MAhBN,EAgBM,CAfJ,eAUO,QAVDA,MAAM,cAAe,SAAM,8CAAU,EAAAE,OAAA,EAAAA,MAAA,qBAAK,e,CAC9C,eAGM,MAHN,EAGM,C,eAFJ,eAAgI,SAAzHC,KAAK,QAAQH,MAAM,e,qDAAwB,EAAAI,KAAKC,SAAQ,IAAEC,YAAY,mBAAmBC,GAAG,QAAQC,SAAA,GAASC,UAAA,I,mBAAlE,EAAAL,KAAKC,YACvD,IAEF,eAGM,MAHN,EAGM,C,eAFJ,eAAsG,SAA/FF,KAAK,WAAWH,MAAM,e,qDAAwB,EAAAI,KAAKM,SAAQ,IAAEJ,YAAY,WAAWE,SAAA,I,mBAAtC,EAAAJ,KAAKM,YAC1D,IAEF,G,IAEF,eAGM,YAFJ,eAAsC,GAAzBC,GAAG,KAAG,C,wBAAC,iBAAI,C,YACxB,eAA6E,UAAvD,EAAAC,S,iBAAnB,eAAsE,G,MAA1CD,GAAG,sB,yBAAqB,iBAAI,C,2CAIjE,M,sGAQS,GACbE,KADa,WAEX,MAAO,CACLT,KAAM,CACJC,SAAU,GACVK,SAAU,IAEZE,SAAS,IAGbE,QAAS,CACPC,QADO,SACCC,GACNC,KAAKb,KAAL,kBAAiBY,GACjBC,KAAKf,SAEPA,MALO,WAKC,WACAW,EAAG,kBAASI,KAAKb,MACvBc,EAAA,KACGC,KAAK,OAAIC,OAAQP,GACjBQ,MAAK,SAACC,GACL,MAA4BA,EAAIT,KAAxBU,eAAR,SACIA,GACF,EAAKC,WAAWF,EAAIT,MACpB,EAAKY,QAAQC,KAAK,uBAElB,EAAKC,MAAM,CACTC,MAAON,EAAIT,KAAKgB,QAChBC,KAAM,QACNC,OAAO,EACPC,SAAU,SACVC,iBAAiB,EACjBC,mBAAmB,OAIxBC,OAAM,SAACC,GACN,EAAKT,MAAM,CACTC,MAAOQ,EAAMC,WACbP,KAAM,QACNC,OAAO,EACPC,SAAU,SACVC,iBAAiB,EACjBC,mBAAmB,QAI3BV,WApCO,YAoCwB,IAAlBc,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QAClBC,SAASC,OAAT,mBAA8BH,EAA9B,qBAAgD,IAAII,KAAKH,KAErDI,UAvCC,WAuCW,+JAChB,EAAK/B,SAAU,EADC,SAEVM,EAAA,KACHC,KAAK,OAAIyB,OACTvB,MAAK,SAACC,GACL,IAAQC,EAAYD,EAAIT,KAAhBU,QACJA,IACF,EAAKX,SAAU,MAGlBuB,OAAM,SAACC,GACN,EAAKT,MAAM,CACTC,MAAOQ,EAAMC,WACbP,KAAM,QACNC,OAAO,EACPC,SAAU,SACVC,iBAAiB,EACjBC,mBAAmB,OAjBT,+CAsBpBW,QAvEa,WAwEX,IAAMC,EAAYN,SAASC,OAAOM,QAAQ,iDAAkD,MAC5F7B,EAAA,KAAS8B,SAASC,QAAQC,OAAOC,cAAgBL,EAEjD7B,KAAK0B,c,UCrGT,EAAOS,OAASA,EAED,gB,yDCPf","file":"js/chunk-71fe38f9.e3ad2dbd.js","sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"container mt-5\">\n      <div class=\"row justify-content-center\">\n        <h1 class=\"h3 mb-3 font-weight-normal\">請先登入</h1>\n        <div class=\"col-8\">\n          <form class=\"form-signin\" @submit.prevent=\"login\">\n            <div class=\"form-floating mb-3\">\n              <input type=\"email\" class=\"form-control\" v-model=\"user.username\" placeholder=\"name@example.com\" id=\"email\" required autofocus />\n              <label for=\"email\">Email address</label>\n            </div>\n            <div class=\"form-floating\">\n              <input type=\"password\" class=\"form-control\" v-model=\"user.password\" placeholder=\"Password\" required />\n              <label for=\"password\">Password</label>\n            </div>\n            <button class=\"btn btn-lg btn-primary w-100 mt-3\">登入</button>\n          </form>\n          <div>\n            <router-link to=\"/\">Home</router-link>\n            <p><router-link v-if=\"isLogin\" to=\"/dashboard/product\">直接登入</router-link></p>\n          </div>\n        </div>\n      </div>\n      <p class=\"mt-5 mb-3 text-muted\">&copy; 2021~∞ - 2021</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { hexAxios, api } from '@/response/hexAxios';\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: '',\n        password: '',\n      },\n      isLogin: false,\n    };\n  },\n  methods: {\n    setUser(userData) {\n      this.user = { ...userData };\n      this.login();\n    },\n    login() {\n      const data = { ...this.user };\n      hexAxios\n        .post(api.signin, data)\n        .then((res) => {\n          const { success = false } = res.data;\n          if (success) {\n            this.saveCookie(res.data);\n            this.$router.push('/dashboard/product');\n          } else {\n            this.$swal({\n              title: res.data.message,\n              icon: 'error',\n              toast: false,\n              position: 'center',\n              showCloseButton: true,\n              showConfirmButton: false,\n            });\n          }\n        })\n        .catch((error) => {\n          this.$swal({\n            title: error.toString(),\n            icon: 'error',\n            toast: false,\n            position: 'center',\n            showCloseButton: true,\n            showConfirmButton: false,\n          });\n        });\n    },\n    saveCookie({ token, expired }) {\n      document.cookie = `hexToken=${token}; expires=${new Date(expired)}`;\n    },\n    async checkUser() {\n      this.isLogin = false;\n      await hexAxios\n        .post(api.check)\n        .then((res) => {\n          const { success } = res.data;\n          if (success) {\n            this.isLogin = true;\n          }\n        })\n        .catch((error) => {\n          this.$swal({\n            title: error.toString(),\n            icon: 'error',\n            toast: false,\n            position: 'center',\n            showCloseButton: true,\n            showConfirmButton: false,\n          });\n        });\n    },\n  },\n  created() {\n    const authTOKEN = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    hexAxios.defaults.headers.common.Authorization = authTOKEN;\n    // this.tempProduct = this.defaultProduct();\n    this.checkUser();\n  },\n};\n</script>\n<style>\n.login {\n  min-height: 100vh;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.form-signin {\n  width: 100%;\n  max-width: 330px;\n  padding: 15px;\n  margin: auto;\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=d3b9231a\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=d3b9231a&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=d3b9231a&lang=css\""],"sourceRoot":""}